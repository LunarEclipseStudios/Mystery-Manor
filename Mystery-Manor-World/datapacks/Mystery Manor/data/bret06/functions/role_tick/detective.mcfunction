execute if entity @s[tag=items] run function bret06:detective_slots
execute if entity @s[tag=items] unless data entity @s {Inventory:[{tag:{detect:1b},Slot:0b}]} run function bret06:items/bow
item replace entity @s inventory.26 with arrow

#detective
function bret06:infinite_timer/detective
function bret06:dead_ui/detective
#small
execute if score @s coins matches ..9 if score timer buttonreload matches ..0 if score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6972\u6973\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":0"},{"score":{"name":"timer","objective":"buttonreload"}}]
execute if score @s coins matches ..9 if score timer buttonreload matches 1..9 if score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6972\u6973\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":0"},{"score":{"name":"timer","objective":"buttonreload"}}]
execute if score @s coins matches ..9 unless score timer buttonreload matches ..9 if score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6972\u6973\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":"},{"score":{"name":"timer","objective":"buttonreload"}}]

execute if score @s coins matches ..9 if score timer buttonreload matches ..0 unless score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6972\u6973\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"text":"0"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":0"},{"score":{"name":"timer","objective":"buttonreload"}}]
execute if score @s coins matches ..9 if score timer buttonreload matches 1..9 unless score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6972\u6973\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"text":"0"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":0"},{"score":{"name":"timer","objective":"buttonreload"}}]
execute if score @s coins matches ..9 unless score timer buttonreload matches ..9 unless score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6972\u6973\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"text":"0"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":"},{"score":{"name":"timer","objective":"buttonreload"}}]
#big
execute if score @s coins matches 10.. if score timer buttonreload matches ..0 if score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6970\u6971\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":0"},{"score":{"name":"timer","objective":"buttonreload"}}]
execute if score @s coins matches 10.. if score timer buttonreload matches 1..9 if score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6970\u6971\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":0"},{"score":{"name":"timer","objective":"buttonreload"}}]
execute if score @s coins matches 10.. unless score timer buttonreload matches ..9 if score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6970\u6971\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":"},{"score":{"name":"timer","objective":"buttonreload"}}]

execute if score @s coins matches 10.. if score timer buttonreload matches ..0 unless score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6970\u6971\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"text":"0"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":0"},{"score":{"name":"timer","objective":"buttonreload"}}]
execute if score @s coins matches 10.. if score timer buttonreload matches 1..9 unless score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6970\u6971\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"text":"0"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":0"},{"score":{"name":"timer","objective":"buttonreload"}}]
execute if score @s coins matches 10.. unless score timer buttonreload matches ..9 unless score buttonreload minutes matches 10.. unless score option round_length matches 0 run execute as @s[nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:259}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:258}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:256}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:257}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}},nbt=!{SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}}] at @s unless score @s fixing_power matches 1.. if entity @s[tag=items] if score true gamestarted matches 1 run title @s actionbar ["",{"text":"\u6970\u6971\u6969"},{"score":{"name":"@s","objective":"coins"}},{"text":" \u6969Detective \u2317\u6969"},{"text":"0"},{"score":{"name":"buttonreload","objective":"minutes"}},{"text":":"},{"score":{"name":"timer","objective":"buttonreload"}}]


#perks
#clue
execute if score @s click matches 1.. if data entity @s {SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}} run function bret06:perks/detective/clue/activate
execute if score @s click matches 1.. if data entity @s {SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}} run function bret06:perks/detective/clue/activate
execute if entity @s[tag=items] run function bret06:perks/detective/clue/item
execute if score dperk1 minutes matches ..0 if score @s dperk1 matches ..0 run function bret06:perks/detective/clue/reload
#timer
execute if score @s dperk1 matches ..-1 run function bret06:perks/detective/clue/remove_minute
execute if data entity @s {SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}} unless score @s fixing_power matches 1.. if entity @s[tag=items] run execute unless score dperk1 minutes matches 50.. run execute if score @s dperk1 matches ..0 run title @s actionbar ["",{"text":"\u6994\u6995","bold":"false"},{"text":"Perk Cooldown \u6981 ","bold":false,"color":"green"},{"score":{"name":"dperk1","objective":"minutes"},"bold":false,"color":"green"},{"text":":","bold":false,"color":"green"},{"score":{"name":"@s","objective":"dperk1"},"bold":false,"color":"green"},{"score":{"name":"@s","objective":"dperk1"},"bold":false,"color":"green"}]
execute if data entity @s {SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}} unless score @s fixing_power matches 1.. if entity @s[tag=items] run execute unless score dperk1 minutes matches 50.. run execute if score @s dperk1 matches 1..9 run title @s actionbar ["",{"text":"\u6994\u6995","bold":"false"},{"text":"Perk Cooldown \u6981 ","bold":false,"color":"green"},{"score":{"name":"dperk1","objective":"minutes"},"bold":false,"color":"green"},{"text":":","bold":false,"color":"green"},{"text":"0","bold":false,"color":"green"},{"score":{"name":"@s","objective":"dperk1"},"bold":false,"color":"green"}]
execute if data entity @s {SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}} unless score @s fixing_power matches 1.. if entity @s[tag=items] run execute unless score dperk1 minutes matches 50.. run execute unless score @s dperk1 matches ..9 run title @s actionbar ["",{"text":"\u6994\u6995","bold":"false"},{"text":"Perk Cooldown \u6981 ","bold":false,"color":"green"},{"score":{"name":"dperk1","objective":"minutes"},"bold":false,"color":"green"},{"text":":","bold":false,"color":"green"},{"score":{"name":"@s","objective":"dperk1"},"bold":false,"color":"green"}]
execute if data entity @s {SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:260}}} unless score @s fixing_power matches 1.. if entity @s[tag=items] run title @s actionbar [{"text":"🅂","bold":"false"},{"text":"🄳Right Click To Use!","color":"green","bold":"false"}]
execute if data entity @s {SelectedItem:{id:"minecraft:carrot_on_a_stick",tag:{CustomModelData:261}}} unless score @s fixing_power matches 1.. if entity @s[tag=items] run execute if score dperk1 minutes matches 50.. run title @s actionbar [{"text":"\u6996\u6997","bold":"false"},{"text":"This Perk Can Only Be Used Once Per Game!","bold":"false","color":"red"}]




#new_death_system
execute if score true gamestarted matches 1 if score @s died matches 1.. run title @a title {"text":"Detective Killed!","color":"dark_red"}
execute if score true gamestarted matches 1 if score @s died matches 1.. run playsound bret06:murderer_perk master @a ~ ~ ~ 99999 0.7 1

#game_setup
tag @s add good

#item
kill @e[type=item,nbt={Item: {id: "minecraft:bow", Count: 1b,tag:{detect:1b}}}]